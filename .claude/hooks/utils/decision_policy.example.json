{
  "metadata": {
    "description": "Advanced template for Herald decision policy overrides",
    "version": 1,
    "notes": [
      "Copy to decision_policy.json, remove sections you do not need, then customise reason/severity.",
      "Rules are evaluated top-to-bottom; first match wins.",
      "Tags map to built-in pattern bundles (see updates/decisions/0003-decision-policy-template.md)."
    ]
  },
  "pre_tool_use": {
    "rules": [
      {
        "action": "deny",
        "tags": ["system:dangerous"],
        "reason": "Blocking high-risk destructive commands",
        "severity": "critical"
      },
      {
        "action": "deny",
        "tags": ["git:destructive"],
        "reason": "Resetting git history wipes pending work; require manual intervention",
        "severity": "high"
      },
      {
        "action": "ask",
        "tags": ["package:install"],
        "reason": "Package installation should be reviewed first",
        "severity": "medium"
      },
      {
        "action": "deny",
        "tags": ["secrets:file"],
        "reason": "Never allow editing of secret credential files",
        "severity": "high"
      },
      {
        "action": "ask",
        "tags": ["dependency:lock"],
        "reason": "Lockfiles should be confirmed before modification",
        "severity": "medium"
      }
    ],
    "default": {
      "action": "allow"
    }
  },
  "post_tool_use": {
    "block_on_error": true,
    "error_keys": ["toolError", "error", "traceback"],
    "block_exit_codes_at_least": 1,
    "allow_on_empty_output": true
  },
  "stop": {
    "block_on_loop": true,
    "required_fields": ["summary", "loopDetected"],
    "notes": "Set to false if you trust the parent agent to avoid infinite loops."
  },
  "session": {
    "start": {
      "tags": ["bootstrap"],
      "notes": "SessionStart policies can preload metadata or emit onboarding audio."
    },
    "end": {
      "notes": "SessionEnd policies can trigger archival tasks in future phases."
    }
  }
}
